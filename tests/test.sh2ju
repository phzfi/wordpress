#!/bin/bash

source /usr/src/shell2junit/sh2ju.sh
source ~/.env

juLog -name=TestGitIsInstalled \
   [ `which git | wc -l` -eq 1 ]

juLog -name=TestPHPNoWarnings	\
   [ `php -v |grep "Unable to load dynamic library" | grep -v grep | wc -l` -eq 0 ]

juLog -name=TestTidyIsInstalled \
   [ `php -i | grep tidy | wc -l` -gt 0 ]

juLog -name=TestWebServerIsRunning \
   [ `ps aux | grep nginx | grep -v grep |wc -l` -gt 0 ]

juLog -name=TestAppServerIsRunning \
   [ `ps aux | grep fpm | grep -v grep |wc -l` -gt 0 ]


touch results/provision-completed-api.txt

exit 0
